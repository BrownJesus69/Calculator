<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Its a Calculator, Calculate-Duh</title>
    <meta name="description" content="A beautiful, powerful calculator with scientific functions, memory operations, and elegant glassmorphic design">
    <link rel="stylesheet" href="style.css">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="data:application/json;base64,eyJuYW1lIjoiUXVhbnR1bSBDYWxjdWxhdG9yIiwic2hvcnRfbmFtZSI6IkNhbGN1bGF0b3IiLCJzdGFydF91cmwiOiIuIiwiZGlzcGxheSI6InN0YW5kYWxvbmUiLCJ0aGVtZV9jb2xvciI6IiM2NjdlZWEiLCJiYWNrZ3JvdW5kX2NvbG9yIjoiIzY2N2VlYSIsImljb25zIjpbeyJzcmMiOiJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUIzYVdSMGFEMGlOalFpSUdobGFXZG9kRDBpTmpRaUlIWnBaWGRDYjNnOUlqQWdNQ0EyTkNBMk5DSWdabWxzYkQwaVV5TjJOaklpUGp3dmMzWm5QZz09Iiwic2l6ZXMiOiI2NHg2NCIsInR5cGUiOiJpbWFnZS9zdmcreG1sIn1dfQ==">
    
    <!-- Theme Color -->
    <meta name="theme-color" content="#667eea">
    <meta name="color-scheme" content="light dark">
    
    <!-- Preload critical resources -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>
<body>
    <div class="calculator-app" id="calculator-app">
        <!-- Header with theme toggle and mode selector -->
        <header class="calc-header">
            <div class="header-controls">
                <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
                    <span class="theme-icon light-icon">‚òÄÔ∏è</span>
                    <span class="theme-icon dark-icon">üåô</span>
                </button>
                <div class="mode-toggle-container">
                    <button class="mode-toggle" id="mode-toggle" aria-label="Toggle between standard and scientific mode">
                        <span class="mode-text">SCI</span>
                    </button>
                </div>
                <div class="memory-indicator" id="memory-indicator" aria-live="polite">
                    <span class="memory-text">M</span>
                </div>
            </div>
        </header>

        <!-- Calculator Container -->
        <main class="calculator-container">
            <!-- Display Section -->
            <section class="display-section" role="region" aria-label="Calculator Display">
                <div class="expression-line" id="expression-display" aria-label="Current expression">
                    <span class="expression-text"></span>
                </div>
                <div class="result-line" id="result-display" aria-live="polite" aria-label="Calculation result">
                    <span class="result-text">0</span>
                </div>
            </section>

            <!-- Keypad Section -->
            <section class="keypad-section" role="region" aria-label="Calculator Buttons">
                <!-- Scientific Functions Row (Hidden in Standard Mode) -->
                <div class="scientific-row sci-functions" id="scientific-functions">
                    <button class="btn btn-function" data-function="deg-rad" id="angle-mode" aria-label="Toggle angle mode">DEG</button>
                    <button class="btn btn-function" data-function="sin" aria-label="Sine">sin</button>
                    <button class="btn btn-function" data-function="cos" aria-label="Cosine">cos</button>
                    <button class="btn btn-function" data-function="tan" aria-label="Tangent">tan</button>
                    <button class="btn btn-function" data-function="ln" aria-label="Natural logarithm">ln</button>
                </div>

                <div class="scientific-row sci-functions-2" id="scientific-functions-2">
                    <button class="btn btn-function" data-function="pi" aria-label="Pi constant">œÄ</button>
                    <button class="btn btn-function" data-function="e" aria-label="Euler's number">e</button>
                    <button class="btn btn-function" data-function="sqrt" aria-label="Square root">‚àö</button>
                    <button class="btn btn-function" data-function="square" aria-label="Square">x¬≤</button>
                    <button class="btn btn-function" data-function="power" aria-label="Power">x ∏</button>
                </div>

                <!-- Memory Functions Row -->
                <div class="memory-row">
                    <button class="btn btn-memory" data-memory="mc" aria-label="Memory clear">MC</button>
                    <button class="btn btn-memory" data-memory="mr" aria-label="Memory recall">MR</button>
                    <button class="btn btn-memory" data-memory="m-plus" aria-label="Memory plus">M+</button>
                    <button class="btn btn-memory" data-memory="m-minus" aria-label="Memory minus">M‚àí</button>
                    <button class="btn btn-memory" data-memory="ms" aria-label="Memory store">MS</button>
                </div>

                <!-- Main Calculator Keypad -->
                <div class="keypad-grid">
                    <!-- Row 1 -->
                    <button class="btn btn-clear span-2" data-action="clear" aria-label="All clear">AC</button>
                    <button class="btn btn-operator" data-operator="negate" aria-label="Plus minus">¬±</button>
                    <button class="btn btn-operator" data-operator="percent" aria-label="Percent">%</button>
                    <button class="btn btn-operator primary-op" data-operator="divide" aria-label="Divide">√∑</button>

                    <!-- Row 2 -->
                    <button class="btn btn-number" data-number="7" aria-label="7">7</button>
                    <button class="btn btn-number" data-number="8" aria-label="8">8</button>
                    <button class="btn btn-number" data-number="9" aria-label="9">9</button>
                    <button class="btn btn-operator primary-op" data-operator="multiply" aria-label="Multiply">√ó</button>

                    <!-- Row 3 -->
                    <button class="btn btn-number" data-number="4" aria-label="4">4</button>
                    <button class="btn btn-number" data-number="5" aria-label="5">5</button>
                    <button class="btn btn-number" data-number="6" aria-label="6">6</button>
                    <button class="btn btn-operator primary-op" data-operator="subtract" aria-label="Subtract">‚àí</button>

                    <!-- Row 4 -->
                    <button class="btn btn-number" data-number="1" aria-label="1">1</button>
                    <button class="btn btn-number" data-number="2" aria-label="2">2</button>
                    <button class="btn btn-number" data-number="3" aria-label="3">3</button>
                    <button class="btn btn-operator primary-op span-2-vertical" data-operator="add" aria-label="Add">+</button>

                    <!-- Row 5 -->
                    <button class="btn btn-number span-2" data-number="0" aria-label="0">0</button>
                    <button class="btn btn-number" data-action="decimal" aria-label="Decimal point">.</button>
                    <!-- Add button spans handled by CSS -->

                    <!-- Row 6 -->
                    <button class="btn btn-function" data-action="backspace" aria-label="Backspace">‚å´</button>
                    <button class="btn btn-function" data-function="parentheses" aria-label="Parentheses">()</button>
                    <button class="btn btn-equals" data-action="equals" aria-label="Equals">=</button>
                    <!-- Equals button positioning handled by CSS -->
                </div>
            </section>

            <!-- History Section -->
            <section class="history-section" id="history-section" role="region" aria-label="Calculation History">
                <div class="history-header">
                    <h3>History</h3>
                    <button class="btn-text" id="clear-history" aria-label="Clear history">Clear</button>
                </div>
                <div class="history-list" id="history-list" role="log" aria-live="polite">
                    <div class="history-empty">No calculations yet</div>
                </div>
            </section>
        </main>

        <!-- Error Dialog -->
        <div class="error-dialog hidden" id="error-dialog" role="alert" aria-live="assertive">
            <div class="error-content">
                <div class="error-message" id="error-message"></div>
                <button class="btn btn-primary" id="error-dismiss">OK</button>
            </div>
        </div>

        <!-- Confirmation Dialog -->
        <div class="confirm-dialog hidden" id="confirm-dialog" role="dialog" aria-labelledby="confirm-title" aria-describedby="confirm-message">
            <div class="confirm-content">
                <h4 id="confirm-title">Clear History?</h4>
                <p id="confirm-message">This will permanently delete all calculation history.</p>
                <div class="confirm-actions">
                    <button class="btn btn-secondary" id="confirm-cancel">Cancel</button>
                    <button class="btn btn-primary" id="confirm-ok">Clear</button>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
